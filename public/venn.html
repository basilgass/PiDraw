<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>PiGraph - Dev page</title>

    <!-- Alpine -->
    <script src="//unpkg.com/alpinejs" defer></script>

    <!-- SVG -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/svg.js/3.0.13/svg.min.js"></script>

    <!-- KaTex -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css"
          integrity="sha384-KiWOvVjnN8qwAZbuQyWDIbfCLFhLXNETzBQjA/92pIowpC0d2O3nppDGQVgwd2nB" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
            integrity="sha384-0fdwu/T/EQMsQlrHCCHoH10pkPLlKA1jL5dFyUOvB3lfeT2540/2g6YgSi2BL14p"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/contrib/auto-render.min.js"
            integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR"
            crossorigin="anonymous"></script>
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- PiDraw -->
    <script src="../dev/pidraw.js"></script>
</head>
<body>
<div x-data="tree">
    <div id="root" class="border rounded-xl m-5 max-w-lg"></div>
</div>
<script>
    function tree() {
        let graph = new PiDraw('root', {
            width: 470,
            height: 470,
            origin: {
                x: 35,
                y: 450
            },
            grid: {
                x: 40,
                y: 40
            }
        })

        const E = graph.path("m 10,10 l450,0 0,450 l-450,0 z"),
            A = graph.path("M117.09765999999999 192.28125A118.57143 118.57143 0 0 0 49.158199999999994 299.49609A118.57143 118.57143 0 0 0 167.72852 418.06836A118.57143 118.57143 0 0 0 237.73046999999997 395.19921999999997A118.57143 118.57143 0 0 1 189.15819999999997 299.49609A118.57143 118.57143 0 0 1 190.55272999999994 281.35546999999997A118.57143 118.57143 0 0 1 117.09765999999993 192.28125Z ", "A"),
            B = graph.path("M350.9043 189.06641000000002A118.57143 118.57143 0 0 1 284.36132999999995 278.14258A118.57143 118.57143 0 0 1 286.30078 299.49609A118.57143 118.57143 0 0 1 237.73046999999997 395.20116999999993A118.57143 118.57143 0 0 0 307.72852 418.06836A118.57143 118.57143 0 0 0 426.30078000000003 299.49609A118.57143 118.57143 0 0 0 350.9043 189.06641000000002Z ", "B"),
            C = graph.path("M233.72852 52.35352A118.57143 118.57143 0 0 0 115.15820000000002 170.92578000000003A118.57143 118.57143 0 0 0 117.09766000000002 192.28125000000006A118.57143 118.57143 0 0 1 167.35547000000003 180.92578000000003A118.57143 118.57143 0 0 1 167.72852 180.92578000000003A118.57143 118.57143 0 0 1 237.73046999999997 203.79492000000005A118.57143 118.57143 0 0 1 307.72852 180.92578000000003A118.57143 118.57143 0 0 1 350.90430000000003 189.06641000000002A118.57143 118.57143 0 0 0 352.30078000000003 170.92578000000003A118.57143 118.57143 0 0 0 233.72852 52.35352000000003Z ", "C"),
            AB = graph.path("M284.36133 278.14258A118.57143 118.57143 0 0 1 233.72852 289.49609A118.57143 118.57143 0 0 1 190.55469 281.35546999999997A118.57143 118.57143 0 0 0 189.15819999999997 299.49609A118.57143 118.57143 0 0 0 237.72851999999995 395.19921999999997A118.57143 118.57143 0 0 0 286.3007799999999 299.49609A118.57143 118.57143 0 0 0 284.3613299999999 278.14257999999995Z ", "BC"),
            BC = graph.path("M307.35547 180.92577999999997A118.57143 118.57143 0 0 0 237.72852 203.79296999999997A118.57143 118.57143 0 0 1 284.36133 278.14061999999996A118.57143 118.57143 0 0 0 350.90430000000003 189.06640999999996A118.57143 118.57143 0 0 0 307.72852 180.92577999999997A118.57143 118.57143 0 0 0 307.35547 180.92577999999997Z ", "AB"),
            AC = graph.path("M167.35547000000003 180.92577999999997A118.57143 118.57143 0 0 0 117.09766000000002 192.28125A118.57143 118.57143 0 0 0 190.55273 281.35352A118.57143 118.57143 0 0 1 237.72852 203.79492A118.57143 118.57143 0 0 0 167.72852 180.92577999999997A118.57143 118.57143 0 0 0 167.35547000000003 180.92577999999997Z ", "AC"),
            ABC = graph.path("M237.85742 203.58202999999997A118.57143 118.57143 0 0 0 190.68164000000002 281.14453A118.57143 118.57143 0 0 0 233.85742000000005 289.28515999999996A118.57143 118.57143 0 0 0 284.48828000000003 277.93163999999996A118.57143 118.57143 0 0 0 237.85742000000005 203.58202999999997Z ", "ABC")

        const labels = [
            graph.point(2, 3, "A").hide().label.middle().center(),
            graph.point(8, 3, "B").hide().label.middle().center(),
            graph.point(5, 8, "C").hide().label.middle().center(),
            graph.point(1, 9, "E").hide().label.middle().center()
        ]

        let venn = {
            E: {shape: E, selected: false},
            A: {shape: A, selected: false},
            B: {shape: B, selected: false},
            C: {shape: C, selected: false},
            AB: {shape: AB, selected: false},
            AC: {shape: AC, selected: false},
            BC: {shape: BC, selected: false},
            ABC: {shape: ABC, selected: false}
        }

        for (let key in venn) {
            venn[key].shape.svg.fill("#fff")
                .on("mouseover", function() {
                    this.animate(300).fill("#999")
                })
                .on("mouseleave", function () {
                    this.animate(200).fill(venn[key].selected ? "#cfc" : "#fff")
                })
                .on("click", function () {
                    venn[key].selected = !venn[key].selected
                    // let el = document.getElementById("vennCheck"+key+"_{{$name}}")
                    // el.checked = venn[key].selected
                    // el.dispatchEvent(new CustomEvent("change"))
                    this.fill(venn[key].selected ? "#cfc" : "#fff")
                })
        }
    }
</script>
</body>
</html>