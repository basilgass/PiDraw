<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>PiGraph - Riemann example</title>

    <!-- Alpine -->
    <script src="//unpkg.com/alpinejs" defer></script>

    <!-- SVG -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/svg.js/3.0.13/svg.min.js"></script>

    <!-- KaTex -->
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css"
          integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq"
          crossorigin="anonymous">
    <script crossorigin="anonymous"
            integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz"
            src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js"></script>

    <script src="https://cdn.tailwindcss.com"></script>

    <!-- PiDraw -->
    <script src="../dev/pidraw.js"></script>
</head>
<body>
<div x-data="riemann">
    <div id="root"></div>


    <div class="my-5 text-center">
        <input class="border-b border-b-blue  px-5 py-2" x-model="fx">
    </div>
    <div class="space-x-4 mt-5 text-center">
        <button class="border w-14 py-2" @click="rectangle>2?rectangle--:rectangle;updateRiemann()">-</button>
        <span x-text="rectangle"></span>
        <button class="border w-14 py-2" @click="rectangle++;updateRiemann()">+</button>
    </div>
</div>
<script>
	function riemann () {
		let graph = new PiDraw('root',
				{
					origin: { x: 120, y: 450 },
					grid: { x: 100, y: 100 }
				}),
			rectangle = 8
		graph.axis()

		let p = graph.plot('((x-3)^3-(x-2)^2)/2+1', {
			samples: 20,
			domain: { min: 0, max: 10 }
		})
		p.riemann(2, 6, rectangle)

		// '(1/5)*((x-3)^3-(x-2)^2)+3'
		return {
			fx: '((x-3)^3-(x-2)^2)/2+1',
			graph,
			p,
			rectangle,
			updateRiemann () {
				p.plot(this.fx)
				p.riemann(2, 6, this.rectangle)
			}
		}
	}
</script>
</body>
</html>